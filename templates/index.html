<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>EN → PL Lookup</title>
  <style>
    body { font: 16px/1.45 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif; margin: 2rem; }
    header { margin-bottom: 1.5rem; }
    form { display: flex; gap: .5rem; margin-bottom: 1rem; }
    input[type="text"] { flex: 1; padding: .6rem .75rem; border: 1px solid #ccc; border-radius: .5rem; }
    button { padding: .6rem .9rem; border: 0; background: #2563eb; color: white; border-radius: .5rem; cursor: pointer; }
    button:hover { background: #1d4ed8; }
    .card { border: 1px solid #eee; border-radius: .75rem; padding: 1rem; margin: .5rem 0; }
    .muted { color: #666; }
    .list { margin: 0; padding-left: 1.2rem; }
    a { color: #2563eb; text-decoration: none; }
    a:hover { text-decoration: underline; }
    code { background: #f6f8fa; padding: .15rem .35rem; border-radius: .35rem; }
    .scroll { max-height: 360px; overflow: auto; padding-right: .5rem; }
    .twocol { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .proz-link { display: block; padding: 1rem; background: #f0f7ff; border: 2px solid #2563eb; border-radius: .5rem; text-align: center; font-weight: 600; margin-bottom: 0.5rem; }
    .proz-link:hover { background: #e0f2fe; }
  </style>
</head>
<body>
<header>
  <h1>English → Polish Lookup</h1>
  <p class="muted">Enter an English term, an enwiki URL, or a ProZ URL.</p>
</header>

<form action="/" method="get">
  <input type="text" name="q" placeholder="e.g. treadmill, https://en.wikipedia.org/wiki/Golden_Retriever, https://www.proz.com/search/?term=Chaperone&es=1" value="{{ data.get('query','') }}">
  <button type="submit">Search</button>
</form>

{% if data %}
  {% if data.en_title %}
    <div class="card">
      <strong>Resolved English title:</strong> {{ data.en_title }}
    </div>
  {% endif %}

  <div class="twocol">
    <div class="card">
      <h3>DSL Medical Dictionary (EN → PL)</h3>
      {% if data.dsl_en_pl %}
        <div class="scroll">
          <p>
            {% for pair in data.dsl_en_pl.pairs %}
              <strong>{{ pair[0] }}</strong> → {{ pair[1] }}{% if not loop.last %}, {% endif %}
            {% endfor %}
          </p>
        </div>
      {% else %}
        <p class="muted">No EN → PL DSL entry found.</p>
      {% endif %}
    </div>

    <div class="card">
      <h3>DSL Medical Dictionary (PL → EN)</h3>
      {% if data.dsl_pl_en %}
        <div class="scroll">
          <p>
            {% for pair in data.dsl_pl_en.pairs %}
              <strong>{{ pair[0] }}</strong> → {{ pair[1] }}{% if not loop.last %}, {% endif %}
            {% endfor %}
          </p>
        </div>
      {% else %}
        <p class="muted">No PL → EN DSL entry found.</p>
      {% endif %}
    </div>
  </div>

  <div class="twocol">
    <div class="card">
      <h3>Polish Wikipedia</h3>
      {% if data.wiki %}
        <p><strong>PL title:</strong> {{ data.wiki.pl_title }}</p>
        <p><a href="{{ data.wiki.pl_url }}" target="_blank" rel="noopener">Open on pl.wikipedia.org</a></p>
      {% else %}
        <p class="muted">No Polish article found.</p>
      {% endif %}
    </div>

    <div class="card">
      <h3>Diki.pl translations (all)</h3>
      {% if data.diki and data.diki|length %}
        <div class="scroll">
          <ul class="list">
            {% for t in data.diki %}
              <li>{{ t }}</li>
            {% endfor %}
          </ul>
        </div>
        {% if data.diki_href %}
          <p><a target="_blank" rel="noopener" href="{{ data.diki_href }}">Open full results on Diki.pl</a></p>
        {% endif %}
      {% else %}
        <p class="muted">No Diki results.</p>
      {% endif %}
    </div>
  </div>

  <div class="twocol">
    <div class="card">
      <h3>ProZ (English → Polish)</h3>
      {% if data.proz_en_pl_url %}
        <a href="{{ data.proz_en_pl_url }}" target="_blank" rel="noopener" class="proz-link">
          Search on ProZ.com (EN → PL) ↗
        </a>
      {% else %}
        <p class="muted">No search term available.</p>
      {% endif %}
    </div>

    <div class="card">
      <h3>ProZ (Polish → English)</h3>
      {% if data.proz_pl_en_url %}
        <a href="{{ data.proz_pl_en_url }}" target="_blank" rel="noopener" class="proz-link">
          Search on ProZ.com (PL → EN) ↗
        </a>
      {% else %}
        <p class="muted">No search term available.</p>
      {% endif %}
    </div>
  </div>

  <div class="card">
    <h3>API</h3>
    <p>JSON: <code>/api/lookup?q=YOUR_QUERY</code></p>
    {% if data.api_link %}
      <p>Try it for this query: <a href="{{ data.api_link }}">{{ data.api_link }}</a></p>
    {% endif %}
  </div>
{% endif %}

</body>
</html>
