<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>EN → PL Lookup</title>
  <style>
    body { font: 16px/1.45 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif; margin: 2rem; }
    header { margin-bottom: 1.5rem; }
    form { display: flex; gap: .5rem; margin-bottom: 1rem; }
    input[type="text"] { flex: 1; padding: .6rem .75rem; border: 1px solid #ccc; border-radius: .5rem; }
    button { padding: .6rem .9rem; border: 0; background: #2563eb; color: white; border-radius: .5rem; cursor: pointer; }
    button:hover { background: #1d4ed8; }
    .card { border: 1px solid #eee; border-radius: .75rem; padding: 1rem; margin: .5rem 0; }
    .muted { color: #666; }
    .list { margin: 0; padding-left: 1.2rem; }
    a { color: #2563eb; text-decoration: none; }
    a:hover { text-decoration: underline; }
    code { background: #f6f8fa; padding: .15rem .35rem; border-radius: .35rem; }
    .scroll { max-height: 360px; overflow: auto; padding-right: .5rem; }
  </style>
</head>
<body>
<header>
  <h1>English → Polish Lookup</h1>
  <p class="muted">Find the Polish Wikipedia article and dictionary translations (Diki, ProZ) for an English term or enwiki URL.</p>
</header>

<form action="/" method="get">
  <input type="text" name="q" placeholder="e.g. Apple, https://en.wikipedia.org/wiki/Golden_Retriever" value="{{ data.get('query','') }}">
  <button type="submit">Search</button>
</form>

{% if data %}
  {% if data.en_title %}
    <div class="card">
      <strong>Resolved English title:</strong> {{ data.en_title }}
    </div>
  {% else %}
    <div class="card">
      <strong>Couldn’t resolve an English Wikipedia title</strong>
      <div class="muted">We’ll still show dictionary results below.</div>
    </div>
  {% endif %}

  <div class="card">
    <h3>Polish Wikipedia</h3>
    {% if data.wiki %}
      <p><strong>PL title:</strong> {{ data.wiki.pl_title }}</p>
      <p><a href="{{ data.wiki.pl_url }}" target="_blank" rel="noopener">Open on pl.wikipedia.org</a></p>
    {% else %}
      <p class="muted">No Polish article found.</p>
    {% endif %}
  </div>

  <div class="card">
    <h3>Diki.pl translations (all)</h3>
    {% if data.diki and data.diki|length %}
      <div class="scroll">
        <ul class="list">
          {% for t in data.diki %}
            <li>{{ t }}</li>
          {% endfor %}
        </ul>
      </div>
      {% if data.en_title %}
        <p><a target="_blank" rel="noopener" href="https://www.diki.pl/slownik-angielskiego?q={{ data.en_title|urlencode }}">Open full results on Diki.pl</a></p>
      {% endif %}
    {% else %}
      <p class="muted">No Diki results.</p>
    {% endif %}
  </div>

  <div class="card">
    <h3>ProZ translations</h3>
    {% if data.proz and data.proz|length %}
      <ul class="list">
        {% for t in data.proz %}
          <li>{{ t }}</li>
        {% endfor %}
      </ul>
      {% if data.en_title %}
        <p><a target="_blank" rel="noopener"
              href="https://www.proz.com/search/?term={{ data.en_title|urlencode }}&source_lang=ENG&target_lang=POL">
          Open on ProZ</a></p>
      {% endif %}
    {% else %}
      <p class="muted">No ProZ results.</p>
    {% endif %}
  </div>

  <div class="card">
    <h3>API</h3>
    <p>JSON: <code>/api/lookup?q=YOUR_QUERY&amp;proz_limit=5</code></p>
    {% if data.query %}
      <p>Try it for this query: <a href="/api/lookup?q={{ data.query|urlencode }}">/api/lookup?q={{ data.query|urlencode }}</a></p>
    {% endif %}
  </div>
{% endif %}

</body>
</html>
